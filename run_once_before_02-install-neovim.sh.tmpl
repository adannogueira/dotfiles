#!/bin/bash
set -e

echo "Installing Neovim..."

# Install Neovim based on distro
if command -v apt-get &> /dev/null; then
    # Debian/Ubuntu - use AppImage for latest version
    curl -LO https://github.com/neovim/neovim/releases/latest/download/nvim-linux-x86_64.appimage
    chmod u+x nvim-linux-x86_64.appimage
    mkdir -p /opt/nvim
    mv nvim-linux-x86_64.appimage /opt/nvim/nvim
    export PATH="$PATH:/opt/nvim/"
elif command -v pacman &> /dev/null; then
    # Arch
    sudo pacman -S --noconfirm neovim
elif command -v dnf &> /dev/null; then
    # Fedora
    sudo dnf install -y neovim
fi

# Verify installation
if ! command -v nvim &> /dev/null; then
    echo "ERROR: Neovim installation failed"
    exit 1
fi

echo "Neovim installed successfully"
